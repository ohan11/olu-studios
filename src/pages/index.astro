---
import Layout from '../layouts/Layout.astro';
import ShopifyCollection from '../components/ShopifyCollection.astro';

const storeDomain = import.meta.env.SHOPIFY_STORE_DOMAIN || '';
const baseUrl = import.meta.env.BASE_URL || '/';
const homeData = await import('../data/home.json').then(m => m.default).catch(() => ({
  backgroundImage: '/images/stamps.jpeg',
  title: 'Olu',
  about: {
    image: '/images/profile.jpg',
    text: 'Welcome to Olu Studios. I\'m an artist creating unique pieces that blend traditional and contemporary styles.'
  }
}));
const bgUrl = homeData.backgroundImage.startsWith('http') 
  ? homeData.backgroundImage 
  : `${baseUrl.replace(/\/$/, '')}${homeData.backgroundImage}`;

// Home collection configuration
const homeCollectionId = import.meta.env.SHOPIFY_HOME_COLLECTION_ID;

// Custom styling for Home collection (pink/coral theme)
const homeOptions = {
  product: {
    styles: {
      product: {
        '@media (min-width: 601px)': {
          'max-width': 'calc(33.33333% - 30px)',
          'margin-left': '30px',
          'margin-bottom': '50px',
          'width': 'calc(33.33333% - 30px)'
        },
        'text-align': 'left',
        img: {
          height: 'calc(100% - 15px)',
          position: 'absolute',
          left: '0',
          right: '0',
          top: '0'
        },
        imgWrapper: {
          'padding-top': 'calc(75% + 15px)',
          position: 'relative',
          height: '0'
        }
      },
      button: {
        color: '#793939',
        'background-color': '#ed9494',
        ':hover': {
          color: '#793939',
          'background-color': '#d58585'
        },
        ':focus': {
          'background-color': '#d58585'
        },
        'border-radius': '20px',
        'padding-left': '47px',
        'padding-right': '47px'
      }
    },
    buttonDestination: 'modal',
    contents: {
      button: false,
      options: false
    },
    isButton: true,
    text: {
      button: 'View '
    }
  },
  productSet: {
    styles: {
      products: {
        '@media (min-width: 601px)': {
          'margin-left': '-30px'
        }
      }
    }
  },
  modalProduct: {
    contents: {
      img: false,
      imgWithCarousel: true,
      button: false,
      buttonWithQuantity: true
    },
    styles: {
      product: {
        '@media (min-width: 601px)': {
          'max-width': '100%',
          'margin-left': '0px',
          'margin-bottom': '0px'
        }
      },
      button: {
        color: '#793939',
        'background-color': '#ed9494',
        ':hover': {
          color: '#793939',
          'background-color': '#d58585'
        },
        ':focus': {
          'background-color': '#d58585'
        },
        'border-radius': '20px',
        'padding-left': '47px',
        'padding-right': '47px'
      }
    },
    text: {
      button: 'Add to cart'
    }
  },
  option: {},
  cart: {
    styles: {
      button: {
        color: '#793939',
        'background-color': '#ed9494',
        ':hover': {
          color: '#793939',
          'background-color': '#d58585'
        },
        ':focus': {
          'background-color': '#d58585'
        },
        'border-radius': '20px'
      }
    },
    text: {
      total: 'Subtotal',
      button: 'Checkout'
    }
  },
  toggle: {
    styles: {
      toggle: {
        'background-color': '#ed9494',
        ':hover': {
          'background-color': '#d58585'
        },
        ':focus': {
          'background-color': '#d58585'
        }
      },
      count: {
        color: '#793939',
        ':hover': {
          color: '#793939'
        }
      },
      iconPath: {
        fill: '#793939'
      }
    }
  }
};
---

<Layout title="olu studios">
  <div class="home-page">
    <!-- Hero Section with Background Image -->
    <section class="hero-section">
      <div class="hero-background">
        <img src={bgUrl} alt="" class="hero-bg-image" />
      </div>
    </section>

    <!-- Home Collection -->
    {homeCollectionId && storeDomain && (
      <section class="home-collection">
        <div class="container">
          <ShopifyCollection 
            collectionId={homeCollectionId} 
            storeDomain={storeDomain}
            options={homeOptions}
          />
        </div>
      </section>
    )}

    <!-- About Olu Section -->
    <section class="about-section">
      <div class="container">
        <div class="about-content">
          <div class="about-image">
            <img src={homeData.about.image} alt="About Olu" />
          </div>
          <div class="about-text">
            <h2>About Olu</h2>
            <p>{homeData.about.text}</p>
          </div>
        </div>
      </div>
    </section>
  </div>
</Layout>

<style>
  .home-page {
    min-height: 100vh;
  }

  .hero-section {
    width: 100%;
    height: 60vh;
    min-height: 400px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .hero-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }

  .hero-bg-image {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: top center;
  }


  .home-collection {
    padding: 60px 0;
  }

  .about-section {
    padding: 80px 0;
    background: var(--bg-light);
  }

  .about-content {
    display: grid;
    grid-template-columns: 300px 1fr;
    gap: 60px;
    align-items: center;
  }

  .about-image {
    width: 100%;
  }

  .about-image img {
    width: 100%;
    height: auto;
    border-radius: 8px;
    object-fit: cover;
  }

  .about-text h2 {
    font-size: 36px;
    font-weight: 600;
    margin-bottom: 24px;
    color: var(--text-dark);
  }

  .about-text p {
    font-size: 18px;
    line-height: 1.8;
    color: var(--text-dark);
  }

  @media (max-width: 768px) {
    .hero-section {
      height: 20vh;
      min-height: 150px;
    }

    .home-collection {
      padding: 40px 0;
    }

    .about-section {
      padding: 60px 0;
    }

    .about-content {
      grid-template-columns: 1fr;
      gap: 40px;
    }

    .about-text h2 {
      font-size: 28px;
    }

    .about-text p {
      font-size: 16px;
    }
  }
</style>
